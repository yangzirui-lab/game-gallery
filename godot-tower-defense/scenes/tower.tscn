[gd_scene load_steps=6 format=3 uid="uid://tower_scene"]

[ext_resource type="Script" path="res://scripts/tower.gd" id="1"]

[sub_resource type="CircleShape2D" id="circle_1"]
radius = 200.0

[sub_resource type="Gradient" id="gradient_1"]
offsets = PackedFloat32Array(0, 1)
colors = PackedColorArray(1, 0.8, 0, 1, 1, 1, 0, 0)

[sub_resource type="GradientTexture2D" id="gradient_texture_1"]
gradient = SubResource("gradient_1")

[sub_resource type="ParticleProcessMaterial" id="muzzle_flash_mat"]
emission_shape = 1
emission_sphere_radius = 3.0
particle_flag_disable_z = true
direction = Vector3(1, 0, 0)
spread = 30.0
initial_velocity_min = 100.0
initial_velocity_max = 150.0
gravity = Vector3(0, 0, 0)
scale_min = 2.0
scale_max = 4.0
color_ramp = SubResource("gradient_texture_1")

[node name="Tower" type="Node2D"]
script = ExtResource("1")

[node name="Base" type="Polygon2D" parent="."]
color = Color(0.3, 0.3, 0.4, 1)
polygon = PackedVector2Array(-20, -20, 20, -20, 20, 20, -20, 20)

[node name="Turret" type="Node2D" parent="."]

[node name="TurretSprite" type="Polygon2D" parent="Turret"]
color = Color(0.5, 0.5, 0.6, 1)
polygon = PackedVector2Array(-10, -8, 25, -5, 25, 5, -10, 8)

[node name="Muzzle" type="Marker2D" parent="Turret"]
position = Vector2(25, 0)

[node name="MuzzleFlash" type="GPUParticles2D" parent="Turret/Muzzle"]
emitting = false
amount = 5
process_material = SubResource("muzzle_flash_mat")
lifetime = 0.2
one_shot = true
explosiveness = 1.0

[node name="RangeIndicator" type="Polygon2D" parent="."]
visible = false
color = Color(0.2, 0.8, 0.2, 0.15)
polygon = PackedVector2Array(0, -50, 14, -48, 28, -42, 39, -33, 47, -21, 50, 0, 47, 21, 39, 33, 28, 42, 14, 48, 0, 50, -14, 48, -28, 42, -39, 33, -47, 21, -50, 0, -47, -21, -39, -33, -28, -42, -14, -48)

[node name="DetectionArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("circle_1")
